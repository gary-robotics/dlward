---
layout:     post                    # 使用的布局（不需要改）
title:      key                # 标题 
subtitle:    第一篇                  #副标题
date:       2018-06-04              # 时间
author:     BY Edlward              # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - stm32
---

### key

做完整扫描，可以判断组合建：（假设0输入为按键）

行线0输出0，读入列线，可以得到按键值 ，几个0就有几个按键按下
然后行线1输出0，可以得到几个按键按键被按下
.....
最后行线输出0，可以得到对应的按键按下

组合得到的数据，可以最后得到几个按键同时被按下

考虑到列端口可以设置上拉且和译码器通用，一般，我们把扫描行线定义为低电平有效，在某行扫描时刻，读入列线，以4根列线为例，读入数据位取反，结果对应的就是8-4-2-1，这就是键盘列线的权，也就是读回来数据可能是8-4-2-1，或者他们之间相加后的结果，根据键值，直接可以解析出有几个键同时或者单个按下，记得这里的键值，还得加上行扫描的权，比如我用的是四线直接低电平扫描，上面四线又分别是二进制的0~3<<4+列数据，然后就可以用switch语句进分支键盘操作处理程序。
当然你也可以一位一位来判断，不过这样组合键+基本键判断分支会比较多，也比较复杂。
74138 是3-8译码扫描，可以用来进行3线对8线译码  三线是二进制数据，8线就是8根键盘扫描行线。用途是节省IO口，3-8译码器+5列线，这样8个IO可以做40个可任意组合的键盘，进一步4-16+3 可以做64键盘，5-32译码+3可以做96键盘。。。。
